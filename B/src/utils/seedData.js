import mongoose from 'mongoose';
import MenuItem from '../Models/MenuItem.js';
// البيانات الافتراضية مباشرة
const MENU_GROUPS = [
  {
    title: 'محشي ورق عنب بدبس الرمان',
    description: 'أوراق عنب طازجة محشوة بالأرز والخضروات مع نكهة دبس الرمان المميزة',
    items: [
      { name: 'صغير 15 قطعة', price: '190 ج', description: 'مثالي للوجبات الخفيفة' },
      { name: 'متوسط 30 قطعة', price: '270 ج', description: 'يكفي لشخصين' },
      { name: 'كبير 55 قطعة', price: '500 ج', description: 'مثالي للعائلات والضيوف' },
    ],
  },
  {
    title: 'فتة ورق عنب',
    description: 'ورق عنب مفروم مع الخبز المحمص والصلصة الشهية',
    items: [
      { name: 'صغير', price: '170 ج', description: 'حصة فردية' },
      { name: 'كبير', price: '240 ج', description: 'يكفي لشخصين' },
    ],
  },
  {
    title: 'محشي ورق عنب بنكهة الليمون',
    description: 'أوراق عنب محشوة بنكهة الليمون المنعشة',
    items: [
      { name: 'صغير 15 قطعة', price: '190 ج', description: 'نكهة منعشة ولذيذة' },
      { name: 'متوسط 30 قطعة', price: '270 ج', description: 'الحجم الأكثر طلباً' },
      { name: 'كبير 55 قطعة', price: '500 ج', description: 'للمناسبات الخاصة' },
    ],
  },
  {
    title: 'محشي بطاطس',
    description: 'بطاطس محشوة بالأرز والخضروات المتبلة',
    items: [
      { name: 'صغير', price: '130 ج', description: '6 قطع بطاطس متوسطة' },
      { name: 'كبير', price: '220 ج', description: '10 قطع بطاطس كبيرة' },
    ],
  },
  {
    title: 'محشي بصل',
    description: 'بصل محشو بالأرز واللحمة المفرومة',
    items: [
      { name: 'صغير', price: '160 ج', description: '8 حبات بصل متوسطة' },
      { name: 'كبير', price: '250 ج', description: '12 حبة بصل كبيرة' },
    ],
  },
  {
    title: 'محشي كوسا',
    description: 'كوسا محشية بالأرز والخضروات الطازجة على الطريقة الشامية الأصيلة',
    items: [
      { name: 'محشي كوسا - 1 كيلو', price: '190 ج', description: 'كوسا طازجة محشوة بالأرز' },
    ],
  },
  {
    title: 'محشي باذنجان',
    description: 'باذنجان محشو بالأرز واللحمة المفرومة',
    items: [
      { name: 'محشي باذنجان - 1 كيلو', price: '170 ج', description: 'باذنجان طري محشو' },
    ],
  },
  {
    title: 'مكدوس شامي',
    description: 'باذنجان محشو بالجوز والفلفل الأحمر والثوم على الطريقة الشامية الأصيلة',
    items: [
      { name: 'مكدوس شامي - 600 جرام', price: '220 ج', description: 'نكهة شامية أصيلة' },
    ],
  },
  {
    title: 'طبق مشكل',
    description: 'تشكيلة مميزة من المحاشي والمقبلات الشامية',
    items: [
      { name: 'طبق مشكل متوسط', price: '340 ج', description: 'تشكيلة متنوعة للعائلة' },
      { name: 'طبق مشكل كبير', price: '550 ج', description: 'للمناسبات والضيوف' },
    ],
  }
];

// وظيفة لإضافة البيانات الافتراضية
export const seedMenuData = async () => {
  try {
    // فحص لو البيانات موجودة فعلاً
    const existingItems = await MenuItem.countDocuments();
    if (existingItems > 0) {
      console.log('🔄 البيانات موجودة، سيتم تحديثها...');
      await MenuItem.deleteMany({}); // حذف البيانات القديمة
    }

    console.log('🌱 إضافة البيانات الافتراضية...');
    
    const menuItems = [];
    
    MENU_GROUPS.forEach(group => {
      group.items.forEach(item => {
        menuItems.push({
          name: item.name,
          price: parseFloat(item.price.replace(/[^\d.]/g, '')) || 0,
          description: item.description,
          category: group.title,
          isAvailable: true
        });
      });
    });

    await MenuItem.insertMany(menuItems);
    console.log(`✅ تم إضافة ${menuItems.length} عنصر إلى قاعدة البيانات`);
    
  } catch (error) {
    console.error('❌ خطأ في إضافة البيانات:', error);
  }
};